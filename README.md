# Point Wallet Service (DDD + Redis + Kafka)

## π“ ν”„λ΅μ νΈ λ°°κ²½
ν„μ¬ νμ‚¬μ—μ„ **μ„ λ¶ μ„λΉ„μ¤**λ¥Ό μ΄μ μ¤‘μ΄λ©°, μ‹ κ·λ΅ **μ λ¦½ ν¬μΈνΈ** κΈ°λ¥μ΄ ν•„μ”ν•μ—¬ μ”κµ¬μ‚¬ν•­μ„ κµ¬ν„ν•΄λ³΄κ³ μ ν•©λ‹λ‹¤.

ν¬μΈνΈ μ‹μ¤ν…μ€ **λ€μ©λ‰ νΈλν”½**, **ν¬μΈνΈ μ‚¬μ© μ‹ λ™μ‹μ„± λ¬Έμ **, **μ •μ‚°/μ›μ¥ μ΄λ ¥ κ΄€λ¦¬**, **λ§λ£ μ²λ¦¬** λ“± λ†’μ€ μμ¤€μ μ•μ •μ„±κ³Ό ν™•μ¥μ„±μ„ μ”κµ¬ν•©λ‹λ‹¤.

λ”°λΌμ„, μ΄λ² ν”„λ΅μ νΈλ” μ΄λ¬ν• μ”κµ¬μ‚¬ν•­μ„ λ€λΉ„ν•μ—¬ **λ„λ©”μΈ μ£Όλ„ μ„¤κ³„(DDD)** λ¥Ό κΈ°λ°μΌλ΅ ν¬μΈνΈ κΈ°λ¥μ„ κµ¬ν„ν•κ³ ,  
λ€μ©λ‰ ν™κ²½μ—μ„λ„ μ•μ •μ μΌλ΅ λ™μ‘ν•  μ μλ„λ΅ **Redis(λ¶„μ‚° λ½ + μΊμ‹±)**, **Kafka(μ΄λ²¤νΈ κΈ°λ° λΉ„λ™κΈ° μ²λ¦¬)** λ¥Ό μ μ©ν• **μ‹¤μ „ν• μ•„ν‚¤ν…μ² κµ¬μ¶•**μ„ λ©ν‘λ΅ ν•©λ‹λ‹¤.

---

# π€ κΈ°μ  μ¤νƒ

## β” Backend
- **Java 21**
- **Spring Boot 3.x**
- Spring Data JPA
- Spring Web
- Spring Validation

## β” Database
- **H2 Database (κ°λ°/ν…μ¤νΈ ν™κ²½)**
    - μΈλ©”λ¨λ¦¬ DBλ΅ λΉ λ¥΄κ³  νΈλ¦¬ν•¨
    - Redisμ™€ ν•¨κ» μ‚¬μ© κ°€λ¥ (Redisλ” μΊμ‹/λ½ μ—­ν• )
- μ΄ν›„ μ‹¤μ„λΉ„μ¤ κ³ λ ¤ μ‹ PostgreSQL/MySQL ν™•μ¥ κ°€λ¥

## β” Messaging / Cache
- **Redis**
    - νμ› λ‹¨μ„ λ¶„μ‚° λ½(Redis Lock)
    - ν¬μΈνΈ μ”μ•΅/λ§λ£ μ”μ•½ μΊμ‹±
    - μ΄λ²¤νΈ μ¤λƒ…μƒ· μΊμ‹±

- **Apache Kafka**
    - ν¬μΈνΈ μ λ¦½/μ‚¬μ©/μ‚¬μ©μ·¨μ†/λ§λ£ μ΄λ²¤νΈ λ°ν–‰
    - μ΄λ²¤νΈ κΈ°λ° μ •μ‚°/μ›μ¥ μ„λΉ„μ¤ κµ¬μ¶• κ°€λ¥
    - μ•λ¦Ό μ„λΉ„μ¤ λ° λ°°μΉ μ‹μ¤ν… ν™•μ¥ κ°€λ¥

## β” Build / Test
- Gradle 8.x
- JUnit 5


---
# π”— μ „μ²΄ μ•„ν‚¤ν…μ²

```
[Controller]
     β†“
[Application Service]
     β†“ (Redis Distributed Lock)
[Domain Layer β€“ PointWallet Aggregate]
     β†“
[RDB(H2) μ €μ¥]
     β†“
[Kafka Producer] β†’ point-events
     β†“
-----------------------------------------------------
   LedgerConsumer β†’ μ›μ¥ DB μ €μ¥
   ExpireConsumer β†’ λ§λ£ μ²λ¦¬ μλ™ν™”
   NotificationConsumer β†’ λ¬Έμ/ν‘Έμ‹ μ•λ¦Ό
-----------------------------------------------------
[Redis Cache] β†’ balance, snapshot μ €μ¥
```

---

# π― ν”„λ΅μ νΈ λ©μ  μ”μ•½

> β€μ‹¤μ  μ„λΉ„μ¤ μμ¤€μ μ •ν™•μ„± & ν™•μ¥μ„±μ„ κ°–μ¶ ν¬μΈνΈ μ§€κ°‘ μ‹μ¤ν…μ„ DDD κΈ°λ°μΌλ΅ μ„¤κ³„ν•κ³ ,  
> Redis(λ½/μΊμ‹±) + Kafka(μ΄λ²¤νΈ κΈ°λ°) μ•„ν‚¤ν…μ²λ¥Ό μ ‘λ©ν•μ—¬ μ•μ •μ μΈ λ€κ·λ¨ νΈλν”½ μ²λ¦¬ ν™κ²½μ„ κµ¬μ¶•ν•λ” κ²ƒβ€.  
